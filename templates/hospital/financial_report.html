{% extends 'hospital/admin_base.html' %}

{% block content %}
<div class="container">
    <h2>Financial Report</h2>
    <p>Total Expenses: {{ total_expenses }}</p>
    <p>Total Income: {{ total_income }}</p>
    <p>Profit: {{ profit }}</p>

    <!-- Date Filter Form -->
    <form method="get" class="float-right">
        <div class="form-group">
            <label for="date_filter">Filter by Date:</label>
            <input type="date" id="date_filter" name="date_filter" class="form-control">
        </div>
        <button type="submit" class="btn btn-primary">Filter</button>
    </form>

    <div class="row">
        <div class="col-md-6">
            <h3>Expenses</h3>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Amount</th>
                    </tr>
                </thead>
                <tbody>
                    {% for expense in expenses %}
                    <tr>
                        <td>{{ expense.date }}</td>
                        <td>{{ expense.amount }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="col-md-6">
            <h3>Sales</h3>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Medication</th>
                        <th>Quantity</th>
                        <th>Price</th>
                    </tr>
                </thead>
                <tbody>
                    {% for medication in medications %}
                    <tr>
                        <td>{{ medication.date_dispensed }}</td>
                        <td>{{ medication.drug.name }}</td>
                        <td>{{ medication.prescription.quantity }}</td>
                        <td>{{ medication.total_price_after_margin }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
